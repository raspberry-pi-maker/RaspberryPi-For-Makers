# 새로운 GPIO 개발도구 선택

## WiringPi
제가 책을 쓴 2017년 당시 C언어용으로 주로 사용하던 개발 도구입니다. C/C++을 사용하는 라즈베리파이 개발자라면 이 도구를 알고계실겁니다. 책에서도 소개한 것처럼 이 개발 도구는 API가 깔끔하게 설계되어 있기 때문에 쉽게 배울 수 있습니다. 아마도 라즈베리파이에서 GPIO 제어를 위해 C/C++ 개발자가 가장 많이 사용하는 라이브러리일 것입니다.그런데 개발자인 Gordon은 2019년 8월 자신의 홈페이지에 라즈베리파이 4를 위한 업데이트를 마지막으로 더이상 WiringPi를 오픈소스로 공개하지 않고 자신의 기존 고객관리용으로 비공개로 사용하겠다고 밝혔습니다.<br/><br/>

### WiringPi 개발자는 왜 오픈소스 WiringPi 지원을 중단했나?
이 개발도구의 저자인 Gordon은 WiringPi가 초보자용이 아니며 C언어를 사용한 개발 도구라는 점을 강조했습니다. 그런데 최근 일부 개발자들이 WiringPi를 파이썬 또는 NodeJS 등의 언어에서 사용할 수 있도록 바인딩을 개발했습니다. 제가 보는 시각으로는 이 부분은 큰 문제가 아닌 것 같습니다. 이런식으로 공개된 오픈소스를 활용해 새로운 창작물을 만드는 과정은 소프트웨어 발전에 도음이 될 수 있으며 오픈소스 존재 이유 중의 하나이기 떄문입니다. 하지만 이 과정에서 파이썬, NodeJS, 루비 등 새로운 창작울을 사용하는 개발자들로부터 수많은 질문을 받는 과정에서 상당한 스트레스를 받은 것 같습니다. 그리고 결정적으로 이 과정에서 일부는 새로운 WiringPi를 상용으로 판매를 했고 돈을 주고 구매를 한 일부 사용자들로에게 기술지원 등의 요구를 받았습니다. 아마도 이 행위들이 Gordon씨의 마음을 너무 불편하게 한 것 같습니다. 이같은 일을 겪으면서 Gordon은 더 이상의 지원을 중단했고 2019년 6월버젼을 마지막으로 원 저자인 Gordon의 WiringPi 새로운 버젼은 사용할 수 없게 되었습니다. 현재 버젼에서 4B+까지는 작동하기 때문에 문제는 없지만 향후 라즈베리파이 재단에서 신제품이 나오면서 하드웨어 구성이 바뀌게 되면 새로운 하드웨어에서는 사용할 수 없을 수 있습니다.<br/><br/>

### C/C++ 개발자의 대안
원저자인 Gordon의 지원은 중단되었지만 WiringPi에 대한 지원이 중단된 것은 아닙니다. Gordon이 공개한 마지막 소스코드를 복제해 GitHub에서 새로운 버젼을 계속 지원하는 개발자들이 있습니다.
GitHub에서 https://github.com/WiringPi 를 검색하면 비공식(UnOfficial) WiringPi에 대한 지원이 계속 되고 있는 것을 알 수 있습니다. 현재도 계속 업데이트되고 있습니다. 하지만 라즈베리파이 4에서 사용은 큰 문제 없겠지만 새로운 하드웨어가 나왔을 때 이 버젼의 안정성 등에 대한 검증은 필요해 보입니다. 그런데 이 GitHub사이트에 루비, 파이썬, PHP, NodeJS 등의 바인딩이 있는 것으로 보아 이 사이트도 Gordon씨의 심기를 불편하게 했을 것 같습니다. <br/>


다른 대안으로 pigpio 패키지가 있습니다. 제 책에서도 소개했던 패키지인데 개인적으로는 상당히 높게 평가하는 패키지입니다. https://github.com/joan2937 페이지에서 다운로드 가능합니다. 현재(2021년)도 버젼관리가 이루어지고 있는 것으로 보입니다. 

아마 새로운 버젼의 라즈베리파이 출시 시점에 이런 개발도구와 관련한 문제로 C/C++ 개발자들이 GPIO제어에 어려움을 느낀다면 라즈베리파이 재단에서 분명히 새로운 개발 도구를 공개할 것으로 생각합니다.
<br/><br/>

## 파이썬
2017년 파이썬으로 GPIO를 제어할 수 있는 패키지는 RPi.GPIO를 많이 사용했습니다. 제 책의 예제들 역시 모두 RPi.GPIO를 이용해 만들어졌습니다. 하지만 지금은 GPIO Zero를 많이 사용하고 있습니다.
이 두가지 패키지 중에서 어떤 것을 사용하는 것이 좋을 지 한번 생각해보겠습니다. 물론 앞에서 소개한 pigpio에도 파이썬 바인딩이 있기 때문에 pigpio를 사용할 수도 있습니다.<br/><br/>

### RPi.GPIO
라즈베리파이 초기부터 파이썬 인터페이스로 많이 사용했던 개발도구입니다. 사용방법이 gpiozero보다는 저수준(low level)입니다. 저는 이런 저수준 접근 방식을 좋아합니다. 특히 초심자들은 저수준 접근 방식을 사용해야 한다고 믿습니다. 그 이유는 저수준에서 접근해야 작동원리를 이해하는데 더 큰 도움이 됩니다. GPIO 제어의 대부분은 GPIO핀의 ON,OFF 설정과 ON, OFF 상태를 읽는 것입니다. 이런 관점에서 접근한다면 저는 gpiozero보다는 Rpi.GPIO를 우선 사용할 것입니다. <br/><br/>

### gpiozero
라즈베리파이 재단에서 일했던 Ben Nuttall이 공개한 GPIO 제어를 위한 파이썬 개발 도구입니다. RPi.GPIO보다 객체지향적으로 만들어졌습니다. 따라서 코드가 상당히 간결한 장점이 있습니다. <br/><br/>

### Rpi.GPIO vs. gpiozero
간단한 예제코드를 통해 장단점을 비교해 보겠습니다. <br/><br/>

먼저 Rpi.GPIO를 사용한 코드입니다.

```python
import RPi.GPIO as GPIO
led = 18
GPIO.setmode(GPIO.BCM)
GPIO.setup(led, GPIO.OUT)
GPIO.output(led, GPIO.HIGH)
```

<br/>다음은 gpiozero를 사용한 코드입니다.
```python
from gpiozero import LED
led = LED(18)
led.on()
```

gpiozero를 사용하면 코드가 상당히 간결합니다. 그리고 객체지향적으로 설계되어서 led를 켜는 것도 led.on()이라는 명령으로 근사합니다. 오랫동안 GPIO를 제어해왔던 숙련자들은 이런 방식의 접근이 생산성 향상에 큰 도움이 될 수 있습니다. 하지만 초심자들은 반드시 알아야 할 중요한 부분들을 놓칠 수 있습니다. <br/><br/>

가령 GPIO 핀배열의 의미를 알 수 있는  setmode 함수
```python
GPIO.setmode(GPIO.BCM)
```
GPIO 핀을 INPUT, OUTPUT 모드로 설정하는 setup 함수
```python
GPIO.setup(led, GPIO.OUT)
```
GPIO 핀을 ON, OFF시키는 output 함수
```python
GPIO.output(led, GPIO.HIGH)
```

그런데 이 3개의 함수가 gpiozero 예제에서는 숨어있습니다. 초보자들은 기초적인 부분들에 대한 반복 사용이 도움이 됩니다.
처음 입문하시는 분들은 Rpi.GPIO를 먼저 사용하면서 GPIO에 대한 제어를 충분히 이해한 다음 객체지향적인 gpiozero를 함께 사용하는 것이 라즈베리파이 학습에 좀 더 도움이 될 것으로 생각합니다. 이 부분은 개인적인 생각이며 저와 다른 생각을 하는 분들 또한 많을 겁니다. 
